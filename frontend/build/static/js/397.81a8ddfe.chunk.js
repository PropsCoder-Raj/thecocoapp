"use strict";(self.webpackChunkthecocoapp=self.webpackChunkthecocoapp||[]).push([[397],{7778:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var i=a(5043),n=a(6446),o=a(5865),l=a(8903),r=a(9840),s=a(1673),d=a(3193),m=a(1906),c=a(3516),p=a(899),g=a(5666),u=a(7306),x=a(6213),h=a(835),v=a(9416),y=a(3768),j=a(4942),A=a(6178),S=a.n(A),b=a(5237),f=a.n(b),R=a(579);const I={otpFormControl:{"& input":{color:"#0B1426",width:"48px !important",height:"48px !important",marginRight:"10px !important",border:"1px solid #D8D8D8",borderRadius:"8px","@media(max-width:460px)":{width:"45px !important",height:"45px !important",marginRight:"7px !important"}}}};const C=function(e){const[t,a]=(0,i.useState)(!1),A=(0,h.Zp)(),b=(0,i.useContext)(j.c),C=localStorage.getItem("emailReset")?{otp:""}:{email:""},P=async()=>{const e=u.A.setPin;try{const t=await x.A.post(e,{email:localStorage.getItem("emailReset")});200===t.status&&(y.Ay.success(t.data.message),a(!1),b.setEndTime(S()().add(3,"m").unix()))}catch(n){var t,i;y.Ay.error((null===n||void 0===n||null===(t=n.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Something went wrong please try again later"),a(!1)}};return(0,R.jsx)(g.A,{title:"ResetPin",children:(0,R.jsxs)(n.A,{sx:{display:"grid",gap:"13px",textAlign:"center"},children:[(0,R.jsx)(o.A,{variant:"h1",color:"rgba(67, 69, 71, 1)",mt:1,children:"Reset PIN"}),(0,R.jsxs)(o.A,{variant:"h4",color:"rgba(67, 69, 71, 1)",children:["Forgot your PIN?",(0,R.jsx)("br",{}),"Reset it now to restore your access."]}),(0,R.jsx)(c.l1,{onSubmit:async e=>{a(!0);const t=localStorage.getItem("emailReset")?u.A.setPinChange:u.A.setPin,i=localStorage.getItem("emailReset")?{email:localStorage.getItem("emailReset"),otp:e.otp}:{email:e.email};try{const n=await x.A.post(t,i);200===n.status&&(localStorage.getItem("emailReset")?(A("/reset-pin-set",{state:{token:n.data.token}}),b.setEndTime(S()().add(0,"m").unix()),localStorage.removeItem("emailReset")):(localStorage.setItem("emailReset",e.email),b.setEndTime(S()().add(3,"m").unix())),y.Ay.success(n.data.message),a(!1))}catch(l){var n,o;y.Ay.error((null===l||void 0===l||null===(n=l.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Something went wrong please try again later"),a(!1)}},initialValues:C,validationSchema:p.Ik().shape(localStorage.getItem("emailReset")?{otp:p.Yj().length(4,"OTP must be 4 digits").required("Please enter your OTP.")}:{email:p.Yj().required("Please enter your email address.")}),children:e=>{var a,i,p,g,u,x;let{errors:h,handleBlur:y,handleChange:j,handleSubmit:S,touched:C,values:w,setFieldValue:T}=e;return(0,R.jsxs)(c.lV,{onSubmit:S,children:[(0,R.jsxs)(l.Ay,{sx:{margin:"13px 0"},children:[(0,R.jsx)(r.A,{disabled:localStorage.getItem("emailReset"),placeholder:"Email ID",type:"email",variant:"outlined",fullWidth:!0,size:"small",inputProps:{maxLength:256},value:w.email,name:"email",error:Boolean(C.email&&h.email),onBlur:y,onChange:j,SX:{padding:"8px 13px"}}),(0,R.jsx)(s.A,{error:!0,children:C.email&&h.email})]}),localStorage.getItem("emailReset")?(0,R.jsx)(l.Ay,{sx:{margin:"13px 0",textAlign:"start"},children:(0,R.jsxs)(n.A,{children:[(0,R.jsx)(o.A,{variant:"body1",color:"rgba(67, 69, 71, 1)",sx:{marginBottom:"13px"},children:"Enter your 4-digit otp"}),(0,R.jsx)(d.A,{fullWidth:!0,error:Boolean(C.pin&&h.pin),sx:I.otpFormControl,children:(0,R.jsx)(f(),{value:w.otp,inputVariant:"standard",autoComplete:"off",onChange:e=>{T("otp",e)},name:"otp",id:"inputID",style:{display:"flex",justifyContent:"start",width:"100%",gap:"15px"},OTPLength:4,otpType:"number"})}),C.otp&&h.otp&&(0,R.jsx)(s.A,{error:!0,children:h.otp})]})}):"",(0,R.jsxs)(l.Ay,{children:[(0,R.jsx)(n.A,{sx:{marginTop:"26px"},children:(0,R.jsxs)(m.A,{type:"submit",variant:"contained",disabled:t,fullWidth:!0,children:["Submit",t&&(0,R.jsx)(v.A,{})]})}),(0,R.jsx)(n.A,{sx:{mt:"13px"},children:(null===(a=b.timeLeft)||void 0===a?void 0:a.minutes)>0||(null===(i=b.timeLeft)||void 0===i?void 0:i.seconds)>0?(0,R.jsxs)(o.A,{variant:"h3",style:{color:"rgba(60, 60, 60, 1)",fontSize:"18px",fontStyle:"normal",fontWeight:"500",lineHeight:"24px"},children:["Resend OTP in \xa0",null===(p=b.timeLeft)||void 0===p||null===(g=p.minutes)||void 0===g?void 0:g.toString().padStart(2,"0"),":",null===(u=b.timeLeft)||void 0===u||null===(x=u.seconds)||void 0===x?void 0:x.toString().padStart(2,"0"),"\xa0s"]}):(0,R.jsx)(n.A,{sx:{display:"grid",justifyContent:"center",mt:"13px"},children:(0,R.jsxs)(o.A,{variant:"body1",color:"rgba(60, 60, 60, 1)",children:["Didn\u2019t get OTP?",(0,R.jsx)("span",{style:{color:"rgba(0, 186, 242, 1)",cursor:"pointer"},onClick:P,children:"\xa0Resend OTP"})]})})}),(0,R.jsx)(n.A,{sx:{display:"grid",justifyContent:"center",mt:"20px"},children:(0,R.jsxs)(o.A,{variant:"body1",color:"rgba(60, 60, 60, 1)",children:["Have an account?",(0,R.jsx)("span",{onClick:()=>{A("/login")},style:{color:"rgba(0, 186, 242, 1)",cursor:"pointer"},children:"\xa0Log In"})]})})]})]})}})]})})}}}]);
//# sourceMappingURL=397.81a8ddfe.chunk.js.map