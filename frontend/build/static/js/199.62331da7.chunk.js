"use strict";(self.webpackChunkthecocoapp=self.webpackChunkthecocoapp||[]).push([[199],{7306:(t,e,i)=>{i.d(e,{A:()=>o});const n="http://thecocoapp.com:8080/api/v1/",o={loginGenerateOtp:"".concat(n,"auth/login/email-with-pin"),loginVerifyOtp:"".concat(n,"auth/login/verify-otp"),signupGenerateOtp:"".concat(n,"auth/signup/generate-otp"),signupVerifiedEmail:"".concat(n,"auth/signup-with-verfied-email-pin"),signupVerifyOtp:"".concat(n,"auth/signup/verify-otp"),setPin:"".concat(n,"auth/send-otp-for-set-pin"),setPinChange:"".concat(n,"auth/verify-otp-for-pin-change"),resetPin:"".concat(n,"auth/reset-pin-password"),createChild:"".concat(n,"child/create"),getSchool:"".concat(n,"school/get-all-schools"),getAllChild:"".concat(n,"child/get-all-childs"),switchChild:"".concat(n,"child/switch-to-active-child"),allModules:"".concat(n,"dashboard/get-all-modules"),getLeason:"".concat(n,"dashboard/get-lessons"),getQuestions:"".concat(n,"dashboard/get-questions"),attemptQuestions:"".concat(n,"questions/attempt-questions")}},7199:(t,e,i)=>{i.r(e),i.d(e,{default:()=>C});var n=i(5043),o=i(6446),a=i(5865),l=i(8903),s=i(3193),r=i(1906),d=i(3516),c=i(899),p=i(5666),u=i(7306),h=i(6213),g=i(835),m=i(5237),v=i.n(m),x=i(9416),y=i(4942),f=i(3768),A=i(6178),j=i.n(A),b=i(579);const w={otpFormControl:{"& input":{color:"#0B1426",width:"48px !important",height:"48px !important",marginRight:"10px !important",border:"1px solid #D8D8D8",borderRadius:"8px","@media(max-width:460px)":{width:"45px !important",height:"45px !important",marginRight:"7px !important"}}}};const C=function(t){const[e,i]=(0,n.useState)(!1),m=(0,g.zy)(),A=(0,n.useContext)(y.c),C=(0,g.Zp)(),S=async()=>{const t=u.A.loginGenerateOtp;try{var e,n;const o=await h.A.post(t,{email:(null===m||void 0===m||null===(e=m.state)||void 0===e?void 0:e.email.email)||(null===m||void 0===m||null===(n=m.state)||void 0===n?void 0:n.email)});200===o.status&&(f.Ay.success(o.data.message),i(!1),A.setEndTime(j()().add(3,"m").unix()))}catch(l){var o,a;f.Ay.error((null===l||void 0===l||null===(o=l.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)||"Something went wrong please try again later"),i(!1)}};return(0,b.jsx)(p.A,{title:"Verify",children:(0,b.jsxs)(o.A,{sx:{display:"grid",gap:"13px",textAlign:"center"},children:[(0,b.jsx)(a.A,{variant:"h1",color:"rgba(67, 69, 71, 1)",mt:1,children:"Verification"}),(0,b.jsx)(a.A,{variant:"h4",color:"rgba(67, 69, 71, 1)",children:"You will get OTP via email"}),(0,b.jsx)(d.l1,{initialValues:{otp:""},validationSchema:c.Ik().shape({otp:c.Yj().length(4,"OTP must be 4 digits").required("Please enter your OTP.")}),onSubmit:async t=>{var e;i(!0);const n="login"===(null===m||void 0===m||null===(e=m.state)||void 0===e?void 0:e.type)?u.A.loginVerifyOtp:u.A.signupVerifyOtp;try{var o,a;const e=await h.A.post(n,{email:(null===m||void 0===m||null===(o=m.state)||void 0===o?void 0:o.email.email)||(null===m||void 0===m||null===(a=m.state)||void 0===a?void 0:a.email),otp:t.otp});var l;if(200===e.status)"signUp"===(null===m||void 0===m||null===(l=m.state)||void 0===l?void 0:l.type)?C("/add-child"):C("/dashboard"),localStorage.setItem("token",e.data.token),f.Ay.success(e.data.message),i(!1)}catch(d){var s,r;f.Ay.error((null===d||void 0===d||null===(s=d.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Something went wrong please try again later"),i(!1)}},children:t=>{var i,n,c,p,u,h;let{errors:g,handleBlur:m,handleChange:y,handleSubmit:f,touched:j,values:C,setFieldValue:O}=t;return(0,b.jsxs)(d.lV,{onSubmit:f,children:[(0,b.jsx)(l.Ay,{sx:{margin:"13px 0"},children:(0,b.jsxs)(o.A,{children:[(0,b.jsx)(s.A,{fullWidth:!0,error:Boolean(j.otp&&g.otp),sx:w.otpFormControl,children:(0,b.jsx)(v(),{value:C.otp,inputVariant:"standard",autoComplete:"off",onChange:t=>{O("otp",t)},name:"otp",id:"inputID",style:{display:"flex",justifyContent:"center",width:"100%",gap:"15px"},OTPLength:4,otpType:"number"})}),j.otp&&g.otp&&(0,b.jsx)(a.A,{color:"error",children:g.otp})]})}),(0,b.jsxs)(l.Ay,{children:[(0,b.jsx)(o.A,{sx:{marginTop:"26px"},children:(0,b.jsxs)(r.A,{type:"submit",variant:"contained",disabled:e,fullWidth:!0,style:{maxWidth:"370px"},children:["Verify",e&&(0,b.jsx)(x.A,{})]})}),(0,b.jsx)(o.A,{sx:{mt:"13px"},children:(null===(i=A.timeLeft)||void 0===i?void 0:i.minutes)>0||(null===(n=A.timeLeft)||void 0===n?void 0:n.seconds)>0?(0,b.jsxs)(a.A,{variant:"h3",style:{color:"rgba(60, 60, 60, 1)",fontSize:"18px",fontStyle:"normal",fontWeight:"500",lineHeight:"24px"},children:["Resend OTP in \xa0",null===(c=A.timeLeft)||void 0===c||null===(p=c.minutes)||void 0===p?void 0:p.toString().padStart(2,"0"),":",null===(u=A.timeLeft)||void 0===u||null===(h=u.seconds)||void 0===h?void 0:h.toString().padStart(2,"0"),"\xa0s"]}):(0,b.jsx)(o.A,{sx:{display:"grid",justifyContent:"center",mt:"13px"},children:(0,b.jsxs)(a.A,{variant:"body1",color:"rgba(60, 60, 60, 1)",children:["Didn\u2019t get OTP?",(0,b.jsx)("span",{style:{color:"rgba(0, 186, 242, 1)",cursor:"pointer"},onClick:S,children:"\xa0Resend OTP"})]})})})]})]})}})]})})}}}]);
//# sourceMappingURL=199.62331da7.chunk.js.map