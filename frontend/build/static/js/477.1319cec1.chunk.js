(self.webpackChunkthecocoapp=self.webpackChunkthecocoapp||[]).push([[477],{3477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var r=n(5043),o=n(6446),a=n(5865),i=n(8903),l=n(3193),s=n(1673),u=n(1906),c=n(3516),d=n(899),p=n(5666),f=n(7306),m=n(6213),h=n(835),g=n(9416),y=n(3768),v=n(4942),x=n(6178),b=n.n(x),j=n(5237),A=n.n(j),O=n(579);const C={otpFormControl:{"& input":{color:"#0B1426",width:"48px !important",height:"48px !important",marginRight:"10px !important",border:"1px solid #D8D8D8",borderRadius:"8px","@media(max-width:460px)":{width:"45px !important",height:"45px !important",marginRight:"7px !important"}}}};const T=function(e){const[t,n]=(0,r.useState)(!1),x=(0,h.Zp)(),j=(0,h.zy)(),T=(0,r.useContext)(v.c);return(0,O.jsx)(p.A,{title:"Reset Password",children:(0,O.jsxs)(o.A,{sx:{display:"grid",gap:"13px",textAlign:"center"},children:[(0,O.jsx)(a.A,{variant:"h1",color:"rgba(67, 69, 71, 1)",mt:1,children:"Reset PIN"}),(0,O.jsxs)(a.A,{variant:"h4",color:"rgba(67, 69, 71, 1)",children:["Forgot your PIN?",(0,O.jsx)("br",{}),"Reset it now to restore your access."]}),(0,O.jsx)(c.l1,{onSubmit:async e=>{var t;n(!0);const r=null===j||void 0===j||null===(t=j.state)||void 0===t?void 0:t.token;try{const t=await(0,m.A)({method:"POST",url:f.A.resetPin,headers:{token:r},data:{new_pin:e.pin,confirm_pin:e.Cotp}});200===t.status&&(y.Ay.success(t.data.message),n(!1),x("/login"),T.setEndTime(b()().add(0,"m").unix()))}catch(i){var o,a;y.Ay.error((null===i||void 0===i||null===(o=i.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)||"Something went wrong please try again later"),n(!1)}},initialValues:{pin:"",Cotp:""},validationSchema:d.Ik().shape({pin:d.Yj().length(4,"OTP must be 4 digits").required("Please enter your OTP."),Cotp:d.Yj().length(4,"OTP must be 4 digits").required("Please enter your OTP.").oneOf([d.KR("pin"),null],"Pin should match.")}),children:e=>{let{errors:n,handleBlur:r,handleChange:d,handleSubmit:p,touched:f,values:m,setFieldValue:h}=e;return(0,O.jsxs)(c.lV,{onSubmit:p,children:[(0,O.jsx)(i.Ay,{sx:{margin:"13px 0",textAlign:"start"},children:(0,O.jsxs)(o.A,{children:[(0,O.jsx)(a.A,{variant:"body1",color:"rgba(67, 69, 71, 1)",sx:{marginBottom:"13px"},children:"Enter 4-digit pin"}),(0,O.jsx)(l.A,{fullWidth:!0,error:Boolean(f.pin&&n.pin),sx:C.otpFormControl,children:(0,O.jsx)(A(),{value:m.pin,inputVariant:"standard",autoComplete:"off",onChange:e=>{h("pin",e)},name:"pin",id:"inputID",style:{display:"flex",justifyContent:"start",width:"100%",gap:"15px"},OTPLength:4,otpType:"number"})}),f.pin&&n.pin&&(0,O.jsx)(s.A,{error:!0,children:n.pin})]})}),(0,O.jsx)(i.Ay,{sx:{margin:"13px 0",textAlign:"start"},children:(0,O.jsxs)(o.A,{children:[(0,O.jsx)(a.A,{variant:"body1",color:"rgba(67, 69, 71, 1)",sx:{marginBottom:"13px"},children:"Confirm 4-digit pin"}),(0,O.jsx)(l.A,{fullWidth:!0,error:Boolean(f.Cotp&&n.Cotp),sx:C.otpFormControl,children:(0,O.jsx)(A(),{value:m.Cotp,inputVariant:"standard",autoComplete:"off",onChange:e=>{h("Cotp",e)},name:"Cotp",id:"inputID",style:{display:"flex",justifyContent:"start",width:"100%",gap:"15px"},OTPLength:4,otpType:"number"})}),f.Cotp&&n.Cotp&&(0,O.jsx)(s.A,{error:!0,children:n.Cotp})]})}),(0,O.jsxs)(i.Ay,{children:[(0,O.jsx)(o.A,{sx:{marginTop:"18px"},children:(0,O.jsxs)(u.A,{type:"submit",variant:"contained",disabled:t,fullWidth:!0,children:["Submit",t&&(0,O.jsx)(g.A,{})]})}),(0,O.jsx)(o.A,{sx:{display:"grid",justifyContent:"center",mt:"13px"},children:(0,O.jsxs)(a.A,{variant:"body1",color:"rgba(60, 60, 60, 1)",children:["Have an account?",(0,O.jsx)("span",{onClick:()=>{x("/login")},style:{color:"rgba(0, 186, 242, 1)",cursor:"pointer"},children:"\xa0Log In"})]})})]})]})}})]})})}},4827:(e,t,n)=>{"use strict";function r(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}n.d(t,{A:()=>r})},5213:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5043),o=n(1053);function a(){return r.useContext(o.A)}},1673:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var r=n(8587),o=n(8168),a=n(5043),i=n(8387),l=n(8606),s=n(4827),u=n(5213),c=n(4535),d=n(6803),p=n(7056),f=n(2400);function m(e){return(0,f.Ay)("MuiFormHelperText",e)}const h=(0,p.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var g,y=n(2876),v=n(579);const x=["children","className","component","disabled","error","filled","focused","margin","required","variant"],b=(0,c.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat((0,d.A)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,o.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(h.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(h.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),j=a.forwardRef((function(e,t){const n=(0,y.A)({props:e,name:"MuiFormHelperText"}),{children:a,className:c,component:p="p"}=n,f=(0,r.A)(n,x),h=(0,u.A)(),j=(0,s.A)({props:n,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),A=(0,o.A)({},n,{component:p,contained:"filled"===j.variant||"outlined"===j.variant,variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required}),O=(e=>{const{classes:t,contained:n,size:r,disabled:o,error:a,filled:i,focused:s,required:u}=e,c={root:["root",o&&"disabled",a&&"error",r&&"size".concat((0,d.A)(r)),n&&"contained",s&&"focused",i&&"filled",u&&"required"]};return(0,l.A)(c,m,t)})(A);return(0,v.jsx)(b,(0,o.A)({as:p,ownerState:A,className:(0,i.A)(O.root,c),ref:t},f,{children:" "===a?g||(g=(0,v.jsx)("span",{className:"notranslate",children:"\u200b"})):a}))}))},5237:(e,t,n)=>{var r;window,e.exports=(r=n(5043),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/otp-input-react/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.r(t);var i=n(0),l=n.n(i);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=function(e){var t=e.maxTime,n=e.onTimerComplete,r=e.timeInterval,o=e.onResendClick,a=Object(i.useRef)(),l=s(Object(i.useState)(t),2),u=l[0],c=l[1];return Object(i.useEffect)((function(){return a.current&&0===u?(clearTimeout(a.current),n&&n()):a.current=setTimeout((function(){c((function(e){return e-1}))}),r),function(){clearTimeout(a.current)}}),[n,u,r]),{handelResendClick:function(){o&&o(0===u),c(t)},remainingTime:u}};function c(e){var t=e.renderTime,n=e.renderButton,r=e.style,i=e.className,s=a(e,["renderTime","renderButton","style","className"]),c=u(s),d=c.remainingTime,p=c.handelResendClick;return l.a.createElement("div",{className:i||"","data-testid":"otp-resend-root",style:o({display:"flex",justifyContent:"space-between"},r)},t?t(d):l.a.createElement("span",null,d," sec"),n?n({disabled:0!==d,onClick:p,remainingTime:d}):l.a.createElement("button",{disabled:0!==d,onClick:p,type:"button"},"Resend OTP"))}c.defaultProps={maxTime:60,timeInterval:1e3,style:{}};var d=c,p={width:32,height:32,textAlign:"center",marginRight:20},f=l.a.memo((function(e){var t=e.focus,n=e.autoFocus,r=e.disabled,s=e.value,u=e.onInputFocus,c=e.index,d=e.secure,f=e.inputStyles,m=e.otpType,h=a(e,["focus","autoFocus","disabled","value","onInputFocus","index","secure","inputStyles","otpType"]),g=Object(i.useRef)(null),y=Object(i.useRef)(!1);Object(i.useEffect)((function(){n&&t&&g.current.focus()}),[]),Object(i.useEffect)((function(){y.current&&t&&g.current.focus(),y.current=!0}),[t]);var v="text";return d?v="password":"number"===m&&(v="tel"),l.a.createElement("input",Object.assign({style:o({},p,f),type:v,maxLength:"1",ref:g,disabled:r,onFocus:function(e){return u(c,e)},value:s||""},h))})),m=function(e){var t=e.autoFocus,n=e.value,r=e.otpType,o=e.onChange,a=e.OTPLength,l=s(Object(i.useState)(t?0:-1),2),u=l[0],c=l[1],d=function(){return n?n.toString().split(""):[]},p=function(e){var t=e.join("");o(t)},f=function(){!function(e){var t=Math.max(Math.min(a-1,e),0);c(t)}("next"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next")?u+1:u-1)},m=function(e){var t=s(e,1)[0],n=d();n[u]=t,p(n)},h=function(e){switch(r){case"number":return!(e.charCodeAt(0)>57||e.charCodeAt(0)<48);case"alpha":return!(e.charCodeAt(0)>122||e.charCodeAt(0)<65);case"alphanumeric":return!(e.charCodeAt(0)>122||e.charCodeAt(0)<48);default:return!0}};return{activeInput:u,getOtpValue:d,handleOnChange:function(e){h(e.target.value)&&(m(e.target.value),f("next"))},handleOnKeyDown:function(e){switch(e.key){case"Backspace":e.preventDefault(),m(""),f("prev");break;case"Delete":e.preventDefault(),m("");break;case"ArrowLeft":e.preventDefault(),f("prev");break;case"ArrowRight":e.preventDefault(),f("next")}},handelOnInput:function(e){e.target.value.length>1&&(e.preventDefault(),f("next"))},handleOnPaste:function(e,t){e.preventDefault();for(var n=d(),r=e.clipboardData.getData("text/plain").slice(0,a-u).split(""),o=0;o<a;++o)o>=u&&r.length>0&&(n[o]=r.shift());for(var i=[n.length],l=0,s=0;s<n.length;++s)h(n[s])&&(i[l]=n[s],l++);p(i)},onInputFocus:function(e,t){c(e),t.target.select()}}},h=function(e){var t=e.OTPLength,n=e.disabled,r=e.autoFocus,a=e.value,s=void 0===a?"":a,u=e.onChange,c=e.otpType,d=e.secure,p=e.className,h=e.inputClassName,g=e.inputStyles,y=e.style,v=e.placeholder,x=m({autoFocus:r,value:s,otpType:c,onChange:u,OTPLength:t}),b=x.activeInput,j=x.getOtpValue,A=x.handleOnChange,O=x.handleOnKeyDown,C=x.handelOnInput,T=x.handleOnPaste,w=x.onInputFocus,P=Object(i.useMemo)((function(){for(var e=j(),o=[],a=0;a<t;a++)o.push(l.a.createElement(f,{className:h,inputStyles:g,key:a,focus:b===a,value:e[a],onChange:A,onKeyDown:O,onInput:C,onPaste:T,onInputFocus:w,index:a,disabled:n,autoFocus:r,secure:d,"data-testid":"input",otpType:c,placeholder:v&&v[a]}));return o}),[j,t,h,g,b,A,O,C,T,w,n,r,d,c,v]);return l.a.createElement("div",{style:o({display:"flex"},y),className:"".concat(p),"data-testid":"otp-input-root"},P)};h.defaultProps={className:"",inputClassName:"",OTPLength:4,onChange:function(){},disabled:!1,secure:!1,autoFocus:!1,value:"",otpType:"any",inputStyles:{},style:{},placeholder:void 0};var g=h;n.d(t,"ResendOTP",(function(){return d})),n.d(t,"default",(function(){return g}))}]))}}]);
//# sourceMappingURL=477.1319cec1.chunk.js.map