"use strict";(self.webpackChunkthecocoapp=self.webpackChunkthecocoapp||[]).push([[199],{7199:(t,e,i)=>{i.r(e),i.d(e,{default:()=>w});var n=i(5043),o=i(6446),l=i(5865),a=i(8903),r=i(3193),s=i(1906),d=i(3516),p=i(899),u=i(5666),c=i(7306),h=i(6213),v=i(835),m=i(5237),x=i.n(m),g=i(9416),y=i(4942),A=i(3768),f=i(6178),j=i.n(f),b=i(579);const S={otpFormControl:{"& input":{color:"#0B1426",width:"48px !important",height:"48px !important",marginRight:"10px !important",border:"1px solid #D8D8D8",borderRadius:"8px","@media(max-width:460px)":{width:"45px !important",height:"45px !important",marginRight:"7px !important"}}}};const w=function(t){const[e,i]=(0,n.useState)(!1),m=(0,v.zy)(),f=(0,n.useContext)(y.c),w=(0,v.Zp)(),C=async()=>{const t=c.A.loginGenerateOtp;try{var e,n;const o=await h.A.post(t,{email:(null===m||void 0===m||null===(e=m.state)||void 0===e?void 0:e.email.email)||(null===m||void 0===m||null===(n=m.state)||void 0===n?void 0:n.email)});200===o.status&&(A.Ay.success(o.data.message),i(!1),f.setEndTime(j()().add(3,"m").unix()))}catch(a){var o,l;A.Ay.error((null===a||void 0===a||null===(o=a.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||"Something went wrong please try again later"),i(!1)}};return(0,b.jsx)(u.A,{title:"Verify",children:(0,b.jsxs)(o.A,{sx:{display:"grid",gap:"13px",textAlign:"center"},children:[(0,b.jsx)(l.A,{variant:"h1",color:"rgba(67, 69, 71, 1)",mt:1,children:"Verification"}),(0,b.jsx)(l.A,{variant:"h4",color:"rgba(67, 69, 71, 1)",children:"You will get OTP via email"}),(0,b.jsx)(d.l1,{initialValues:{otp:""},validationSchema:p.Ik().shape({otp:p.Yj().length(4,"OTP must be 4 digits").required("Please enter your OTP.")}),onSubmit:async t=>{var e;i(!0);const n="login"===(null===m||void 0===m||null===(e=m.state)||void 0===e?void 0:e.type)?c.A.loginVerifyOtp:c.A.signupVerifyOtp;try{var o,l;const e=await h.A.post(n,{email:(null===m||void 0===m||null===(o=m.state)||void 0===o?void 0:o.email.email)||(null===m||void 0===m||null===(l=m.state)||void 0===l?void 0:l.email),otp:t.otp});var a;if(200===e.status)"signUp"===(null===m||void 0===m||null===(a=m.state)||void 0===a?void 0:a.type)?w("/add-child"):w("/dashboard"),localStorage.setItem("token",e.data.token),A.Ay.success(e.data.message),i(!1)}catch(d){var r,s;A.Ay.error((null===d||void 0===d||null===(r=d.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Something went wrong please try again later"),i(!1)}},children:t=>{var i,n,p,u,c,h;let{errors:v,handleBlur:m,handleChange:y,handleSubmit:A,touched:j,values:w,setFieldValue:O}=t;return(0,b.jsxs)(d.lV,{onSubmit:A,children:[(0,b.jsx)(a.Ay,{sx:{margin:"13px 0"},children:(0,b.jsxs)(o.A,{children:[(0,b.jsx)(r.A,{fullWidth:!0,error:Boolean(j.otp&&v.otp),sx:S.otpFormControl,children:(0,b.jsx)(x(),{value:w.otp,inputVariant:"standard",autoComplete:"off",onChange:t=>{O("otp",t)},name:"otp",id:"inputID",style:{display:"flex",justifyContent:"center",width:"100%",gap:"15px"},OTPLength:4,otpType:"number"})}),j.otp&&v.otp&&(0,b.jsx)(l.A,{color:"error",children:v.otp})]})}),(0,b.jsxs)(a.Ay,{children:[(0,b.jsx)(o.A,{sx:{marginTop:"26px"},children:(0,b.jsxs)(s.A,{type:"submit",variant:"contained",disabled:e,fullWidth:!0,style:{maxWidth:"370px"},children:["Verify",e&&(0,b.jsx)(g.A,{})]})}),(0,b.jsx)(o.A,{sx:{mt:"13px"},children:(null===(i=f.timeLeft)||void 0===i?void 0:i.minutes)>0||(null===(n=f.timeLeft)||void 0===n?void 0:n.seconds)>0?(0,b.jsxs)(l.A,{variant:"h3",style:{color:"rgba(60, 60, 60, 1)",fontSize:"18px",fontStyle:"normal",fontWeight:"500",lineHeight:"24px"},children:["Resend OTP in \xa0",null===(p=f.timeLeft)||void 0===p||null===(u=p.minutes)||void 0===u?void 0:u.toString().padStart(2,"0"),":",null===(c=f.timeLeft)||void 0===c||null===(h=c.seconds)||void 0===h?void 0:h.toString().padStart(2,"0"),"\xa0s"]}):(0,b.jsx)(o.A,{sx:{display:"grid",justifyContent:"center",mt:"13px"},children:(0,b.jsxs)(l.A,{variant:"body1",color:"rgba(60, 60, 60, 1)",children:["Didn\u2019t get OTP?",(0,b.jsx)("span",{style:{color:"rgba(0, 186, 242, 1)",cursor:"pointer"},onClick:C,children:"\xa0Resend OTP"})]})})})]})]})}})]})})}}}]);
//# sourceMappingURL=199.177d16e3.chunk.js.map